{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}E-commerce{% endblock %}</title>

    <!-- CSS principal -->
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <!-- Font Awesome para íconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" 
          integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Bloque adicional de head para cada template -->
    {% block head %}{% endblock %}
</head>
<body>

    <!-- ===========================
         NAVBAR
         Contiene enlaces a productos, carrito, cuenta y login/registro
         Se adapta según si el usuario está autenticado
    =========================== -->
    <nav class="navbar">
        <div class="navbar-left">
            <a href="{% url 'lista_productos' %}" class="nav-link">Productos</a>
        </div>

        <div class="navbar-center">
            <img src="{% static 'img/logo.gif' %}" alt="Logo" class="navbar-logo">
        </div>

        <div class="navbar-right">
            {% if user.is_authenticated %}
                <a href="{% url 'ver_carrito' %}" class="icon-link"><i class="fas fa-shopping-cart"></i></a>
                <a href="{% url 'mi_cuenta' %}" class="icon-link"><i class="fas fa-user"></i></a>
                <a href="{% url 'logout_usuario' %}" class="icon-link"><i class="fas fa-sign-out-alt"></i></a>
            {% else %}
                <a href="{% url 'login_usuario' %}" class="icon-link"><i class="fas fa-sign-in-alt"></i></a>
                <a href="{% url 'registro' %}" class="icon-link"><i class="fas fa-user-plus"></i></a>
            {% endif %}
        </div>
    </nav>

    <!-- ===========================
         BLOQUE DE MENSAJES
         Se muestran notificaciones de éxito, error, info o warning
         Usando los mensajes de Django
    =========================== -->
    <div class="container mt-3">
        {% if messages %}
            {% for message in messages %}
                <div class="alert 
                    {% if message.tags == 'error' %}alert-danger
                    {% elif message.tags == 'success' %}alert-success
                    {% elif message.tags == 'warning' %}alert-warning
                    {% else %}alert-info{% endif %} 
                    alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- ===========================
         CONTENIDO PRINCIPAL
         Cada template lo insertará aquí
    =========================== -->
    <main class="container mt-4">
        {% block content %}{% endblock %}
    </main>

    <!-- ===========================
         FOOTER
         Información institucional y link a GitHub
    =========================== -->
    <footer class="footer-navbar">
        <div class="footer-left">
            <a href="{% url 'lista_productos' %}" class="footer-logo">
                <img src="{% static 'img/logo.gif' %}" alt="Logo" />
            </a>
        </div>
        <div class="footer-center">
            <p>
                Ecommerce hecho para el proyecto final de la carrera Tecnicatura en Programación de la 
                Universidad Tecnológica Nacional, sede San Rafael. Realizado por el grupo CodeX5.
            </p>
        </div>
        <div class="footer-right">
            <a class="btn-github" href="https://github.com" target="_blank">
                <i class="fab fa-github"></i> GitHub
            </a>
        </div>
    </footer>

    <!-- JS de Bootstrap para alertas y componentes interactivos -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Bloque de scripts adicional -->
    {% block scripts %}{% endblock %}
</body>
</html>
